<?xml version="1.0" encoding="UTF-8"?>

<!-- dtd : xml에서 사용된 태그를 정의한 문서 -->
<!-- Mybatis dtd검색 -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.ajfqo.spring.ex.mybatis.repository.ReviewRepository">
	
	<select id ="selectReview"
	resultType="com.ajfqo.spring.ex.mybatis.domain.Review"
	parameterType="int">
		SELECT
			 `id`
			,`storeId`
			,`menu`
			,`userName`
			,`point`
			,`review`
			,`createdAt`
			,`updatedAt`
		FROM `new_review`
		WHERE `id` = #{id}
	</select>

	<insert id ="insertReview"	parameterType="map">	
	<!-- 파라미터 타입이 여러개면 map으로 지정 -->
	<!-- insert, update, delete는 resultType이 무조건 int이기 때문에 타입을 지정해줄 필요가 없다.-->
		INSERT INTO `new_review`
			(
				 `storeId`
				,`menu`
				,`userName`
				,`point`
				,`review`
			)
			VALUE
			(
				 #{storeId}
				,#{menu}
				,#{userName}
				,#{point}
				,#{review}
			)
	</insert>
	
	<insert id ="insertReviewByOject"	
	parameterType="com.ajfqo.spring.ex.mybatis.domain.Review">	
		INSERT INTO `new_review`
			(
				 `storeId`
				,`menu`
				,`userName`
				,`point`
				,`review`
			)
			VALUE
			(
			<!-- repository에서 insert 할때 파라미터로 전달된 형태가 객체라면 객체의 멤버변수 이름으로 채울 수 있다. -->
				 #{storeId}
				,#{menu}
				,#{userName}
				,#{point}
				,#{review}
			)
	</insert>
	
</mapper>